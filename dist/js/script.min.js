"use strict";function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw_cached_site.min.js").then(e=>{}).catch(e=>{})}),window.addEventListener("load",()=>{try{const e=localStorage.getItem("searchQuery"),r=JSON.parse(e);r&&(document.querySelector("#query").setAttribute("value",r),getWeatherInfo(r))}catch(e){}});const dateConverter=e=>{const r=new Date(1e3*e),t=r.getDay(),n=r.getHours(),o="0"+r.getMinutes();return`${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t]}, ${n}:${o.substr(-2)}`},mockJsonResponse={weather:[{main:"",description:"",icon:""}],main:{temp:""},sys:{country:""},name:"",dt:""},getWeatherInfo=e=>{fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&appid={YPOUR_API_KEY}&units=metric`).then(e=>200===e.status?e.json():404===e.status?_objectSpread(_objectSpread({},mockJsonResponse),{},{error:"City not found. Please Check your spelling or try searching for something else.",cod:404}):_objectSpread(_objectSpread({},mockJsonResponse),{},{error:"Oops! An error occured. Please try again.",cod:-1})).then(e=>displayWeatherInfo(e)).catch(e=>{displayWeatherError()})},handleWeatherSearch=e=>{e.preventDefault();const r=e.target.elements.query.value.trim();if(r){document.querySelector(".loading-box").classList.remove("display-none"),getWeatherInfo(r);const e=JSON.stringify(r);localStorage.setItem("searchQuery",e)}else document.querySelector(".weather__error").innerHTML="Please provide a valid city name.",document.querySelector(".weather__error--tip").innerHTML="Tip: Search by - City name, Country e.g. Shuzenji, JP",document.querySelector(".weather__icon").innerHTML="",document.querySelector(".weather__description").innerHTML="",document.querySelector(".weather__temp").innerHTML="",document.querySelector(".weather__time").innerHTML="",document.querySelector(".weather__location").innerHTML="",document.querySelector(".weather").classList.remove("display-none")};document.querySelector("form").addEventListener("submit",handleWeatherSearch);const displayWeatherInfo=e=>{const r=e.weather[0].main.toLowerCase(),{description:t}=e.weather[0],{temp:n}=e.main,{icon:o}=e.weather[0],{name:a}=e,{country:c}=e.sys;let i,s=e.dt;switch(e.dt&&(s=dateConverter(e.dt)),200!==e.cod?(i=e.error,document.querySelector(".weather__error").innerHTML=i,document.querySelector(".weather__error--tip").innerHTML="Tip: Search by - City name, Country e.g. Shuzenji, JP"):(document.querySelector(".weather__error").innerHTML="",document.querySelector(".weather__error--tip").innerHTML=""),document.querySelector(".weather__icon").innerHTML=o&&`<img src=/resources/img/icons/${o}.png alt=weather-icon>`,document.querySelector(".weather__description").innerHTML=t,document.querySelector(".weather__temp").innerHTML=n&&`${n}&deg;`,document.querySelector(".weather__time").innerHTML=s&&`as of ${s} UTC`,document.querySelector(".weather__location").innerHTML=a&&`${a}, ${c}.`,document.querySelector(".loading-box").classList.add("display-none"),document.querySelector(".weather").classList.remove("display-none"),r){case"thunderstorm":document.body.className="thunderstorm";break;case"drizzle":document.body.className="drizzle";break;case"rain":document.body.className="rain";break;case"snow":document.body.className="snow";break;case"clear":o.includes("d")?document.body.className="clear__day":document.body.className="clear__night";break;case"clouds":document.body.className="clouds";break;default:document.body.className="others"}},displayWeatherError=()=>{document.querySelector(".weather__icon").innerHTML="",document.querySelector(".weather__temp").innerHTML="",document.querySelector(".weather__time").innerHTML="",document.querySelector(".weather__error").innerHTML="Unable to get weather information",document.querySelector(".weather__error--tip").innerHTML="Tip: You might be offline. Check your internet connection and try again",document.querySelector(".weather__description").innerHTML="",document.querySelector(".weather__location").innerHTML="",document.querySelector(".loading-box").classList.add("display-none"),document.querySelector(".weather").classList.remove("display-none"),document.body.className="offline"};